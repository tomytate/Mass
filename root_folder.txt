==============================================================================
File: \API.md
==============================================================================
# ProPXEServer API Documentation

## Overview
ProPXEServer provides a RESTful API for managing PXE boot infrastructure, including authentication, boot file management, and subscription handling.

**Base URL**: `https://localhost:7001/api`  
**Authentication**: JWT Bearer Token

---

## Authentication Endpoints

### Register New User
**POST** `/auth/register`

Creates a new user account.

**Request Body:**
```json
{
  "email": "admin@example.com",
  "password": "SecurePassword123!"
}
```

**Response (200 OK):**
```json
{
  "message": "User created successfully"
}
```

**Response (400 Bad Request):**
```json
{
  "errors": {
    "Password": ["Password must be at least 6 characters"]
  }
}
```

---

### Login
**POST** `/auth/login`

Authenticates a user and returns a JWT token.

**Request Body:**
```json
{
  "email": "admin@example.com",
  "password": "SecurePassword123!"
}
```

**Response (200 OK):**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expiration": "2025-11-28T03:48:00Z"
}
```

**Response (401 Unauthorized):**
```json
{
  "message": "Invalid credentials"
}
```

---

## Boot Files Management

### List All Boot Files
**GET** `/bootfiles`

Returns a list of all boot files organized by architecture.

**Headers:**
```
Authorization: Bearer {token}
```

**Response (200 OK):**
```json
{
  "bios": [
    {
      "filename": "mass.kpxe",
      "size": 386679,
      "architecture": "BIOS",
      "lastModified": "2025-11-28T02:30:00Z"
    }
  ],
  "uefi": [
    {
      "filename": "mass.efi",
      "size": 1124352,
      "architecture": "UEFI",
      "lastModified": "2025-11-28T02:30:00Z"
    }
  ],
  "arm64": [
    {
      "filename": "mass-arm64.efi",
      "size": 1116160,
      "architecture": "ARM64",
      "lastModified": "2025-11-28T02:30:00Z"
    }
  ]
}
```

---

### Upload Boot File
**POST** `/bootfiles/upload`

Uploads a new boot file. The file is automatically categorized by architecture based on its name and extension.

**Headers:**
```
Authorization: Bearer {token}
Content-Type: multipart/form-data
```

**Request Body (Form Data):**
- `file`: Binary file data

**Response (200 OK):**
```json
{
  "message": "File uploaded successfully",
  "filename": "mass.kpxe",
  "architecture": "BIOS",
  "path": "wwwroot/pxe/bios/mass.kpxe"
}
```

**Automatic Architecture Detection:**
- `.kpxe`, `.lkrn`, `.dsk` â†’ `bios/`
- `.efi` â†’ `uefi/`
- `-arm64.efi` â†’ `arm64/`

---

### Download Boot File
**GET** `/bootfiles/download/{filename}`

Downloads a specific boot file.

**Headers:**
```
Authorization: Bearer {token}
```

**Parameters:**
- `filename`: Name of the file to download (e.g., `mass.kpxe`)

**Response (200 OK):**
- Binary file stream
- Content-Type: `application/octet-stream`

**Response (404 Not Found):**
```json
{
  "message": "File not found"
}
```

---

### Delete Boot File
**DELETE** `/bootfiles/{filename}`

Deletes a boot file.

**Headers:**
```
Authorization: Bearer {token}
```

**Parameters:**
- `filename`: Name of the file to delete

**Response (200 OK):**
```json
{
  "message": "File deleted successfully"
}
```

**Response (404 Not Found):**
```json
{
  "message": "File not found"
}
```

---

## Distribution Images

### List All Distribution Images
**GET** `/images`

Returns a list of all available distribution images (USB, ISO, disk images).

**Response (200 OK):**
```json
[
  {
    "id": 1,
    "fileName": "mass.iso",
    "category": "ISO",
    "fileSizeBytes": 2402304,
    "fileSizeMB": 2.29,
    "downloadUrl": "/api/images/iso/mass.iso",
    "createdAt": "2025-11-28T10:00:00Z"
  },
  {
    "id": 2,
    "fileName": "mass.img",
    "category": "USB",
    "fileSizeBytes": 2064384,
    "fileSizeMB": 1.97,
    "downloadUrl": "/api/images/usb/mass.img",
    "createdAt": "2025-11-28T10:00:00Z"
  }
]
```

---

### Download USB Image
**GET** `/images/usb/{filename}`

Downloads a USB bootable image file.

**Parameters:**
- `filename`: Name of the USB image (e.g., `mass.img`, `mass-multiarch.img`)

**Response (200 OK):**
- Binary file stream
- Content-Type: `application/octet-stream`

**Available USB Images:**
- `mass.img` - Standard USB image (~2 MB)
- `mass-multiarch.img` - Multi-architecture USB image (~3 MB)

---

### Download ISO Image
**GET** `/images/iso/{filename}`

Downloads an ISO bootable image file.

**Parameters:**
- `filename`: Name of the ISO image

**Response (200 OK):**
- Binary file stream
- Content-Type: `application/x-iso9660-image`

**Available ISO Images:**
- `mass.iso` - Standard ISO (~2.4 MB)
- `mass-multiarch.iso` - Multi-architecture ISO (~3.5 MB)
- `mass-arm64.iso` - ARM64 ISO (~2.0 MB)

---

### Download Disk Image
**GET** `/images/disk/{filename}`

Downloads a disk image file.

**Parameters:**
- `filename`: Name of the disk image

**Response (200 OK):**
- Binary file stream
- Content-Type: `application/octet-stream`

**Available Disk Images:**
- `mass.dsk` - Standard disk image
- `mass.efi.dsk` - UEFI disk image

---

## Subscription Endpoints

### Create Checkout Session
**POST** `/subscription/create-checkout`

Creates a Stripe checkout session for monthly subscription.

**Headers:**
```
Authorization: Bearer {token}
```

**Response (200 OK):**
```json
{
  "sessionId": "cs_test_...",
  "url": "https://checkout.stripe.com/pay/cs_test_..."
}
```

**Usage:**
Redirect user to the `url` to complete payment.

---

### Stripe Webhook
**POST** `/subscription/webhook`

Handles Stripe payment events.

**Headers:**
```
Stripe-Signature: t=...,v1=...
```

**Events Handled:**
- `checkout.session.completed` - Activates subscription
- `customer.subscription.updated` - Updates subscription status
- `customer.subscription.deleted` - Deactivates subscription

**Response (200 OK):**
```json
{
  "received": true
}
```

---

## PXE Events (Internal Logging)

While there's no direct API endpoint for PXE events, they are logged in the database and can be queried:

**PxeEvent Model:**
```csharp
{
  "Id": 1,
  "EventType": "DHCP_DISCOVER",
  "MacAddress": "00:11:22:33:44:55",
  "IpAddress": "192.168.1.50",
  "Architecture": "0x0007",
  "Timestamp": "2025-11-28T02:48:00Z"
}
```

**Event Types:**
- `DHCP_DISCOVER` - Client discovery
- `DHCP_OFFER` - Server offer sent
- `PROXY_DHCP` - ProxyDHCP request
- `TFTP_READ` - TFTP file request

---

## Boot Configuration (Future)

The system includes a `BootConfiguration` model for managing custom boot menus:

```csharp
{
  "Id": 1,
  "Name": "Ubuntu 24.04 LTS",
  "Architecture": "UEFI",
  "KernelPath": "/ubuntu/vmlinuz",
  "InitrdPath": "/ubuntu/initrd",
  "KernelParams": "root=/dev/nfs nfsroot=192.168.1.100:/ubuntu",
  "IsEnabled": true
}
```

**Note**: API endpoints for boot configuration management are planned for future releases.

---

## Error Responses

All endpoints follow a consistent error response format:

**400 Bad Request:**
```json
{
  "errors": {
    "FieldName": ["Error message"]
  }
}
```

**401 Unauthorized:**
```json
{
  "message": "Unauthorized"
}
```

**403 Forbidden:**
```json
{
  "message": "Subscription required"
}
```

**404 Not Found:**
```json
{
  "message": "Resource not found"
}
```

**500 Internal Server Error:**
```json
{
  "message": "An error occurred",
  "details": "Stack trace (dev mode only)"
}
```

---

## Rate Limiting

- **Default**: 100 requests per minute per IP
- **Configuration**: `Security.MaxRequestsPerMinute` in `appsettings.json`
- **Response Header**: `X-Rate-Limit-Remaining`

**Response (429 Too Many Requests):**
```json
{
  "message": "Rate limit exceeded"
}
```

---

## Security Considerations

1. **Always use HTTPS in production**
2. **Rotate JWT secret keys regularly**
3. **Implement IP whitelisting for sensitive operations**
4. **Monitor PXE events for suspicious activity**
5. **Keep Stripe webhook secret secure**
6. **Use strong password policies**
7. **Enable CORS only for trusted domains**

---

## Sample Client Code

### C# Example
```csharp
using System.Net.Http.Headers;
using System.Net.Http.Json;

var client = new HttpClient { BaseAddress = new Uri("https://localhost:7001") };

// Login
var loginData = new { email = "admin@example.com", password = "pass" };
var response = await client.PostAsJsonAsync("/api/auth/login", loginData);
var result = await response.Content.ReadFromJsonAsync<LoginResponse>();

// Use token
client.DefaultRequestHeaders.Authorization = 
    new AuthenticationHeaderValue("Bearer", result.Token);

// Get boot files
var bootFiles = await client.GetFromJsonAsync<BootFilesResponse>("/api/bootfiles");
```

### JavaScript Example
```javascript
// Login
const response = await fetch('https://localhost:7001/api/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ 
    email: 'admin@example.com', 
    password: 'pass' 
  })
});
const { token } = await response.json();

// Get boot files
const bootFilesResponse = await fetch('https://localhost:7001/api/bootfiles', {
  headers: { 'Authorization': `Bearer ${token}` }
});
const bootFiles = await bootFilesResponse.json();
```

---

## Versioning
Current API Version: **v1**

Future versions will be accessible via URL prefix:
- `/api/v1/auth/login`
- `/api/v2/auth/login`




==============================================================================
File: \CONTRIBUTING.md
==============================================================================
# Contributing to Mass Suite

Thank you for your interest in contributing to Mass Suite! This document provides guidelines and instructions for contributing to the project.

## Code of Conduct

Be respectful and constructive in all interactions.

## Development Workflow

1. **Fork** the repository
2. **Clone** your fork locally
3. **Create** a feature branch from `develop`
4. **Make** your changes
5. **Test** thoroughly
6. **Commit** with descriptive messages (Conventional Commits format)
7. **Push** to your fork
8. **Submit** a pull request to `develop`

## Commit Message Format

We use [Conventional Commits](https://www.conventionalcommits.org/):

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**Types**: `feat`, `fix`, `docs`, `style`, `refactor`, `perf`, `test`, `chore`, `ci`

**Examples**:
- `feat(launcher): add plugin discovery system`
- `fix(core): resolve domain event inheritance issue`
- `docs(readme): update installation instructions`

## Coding Standards

- Follow `.editorconfig` conventions
- Use C# 14 features where appropriate
- Maintain 80%+ test coverage for new code
- Use file-scoped namespaces
- Enable nullable reference types
- Write self-documenting code
- Add XML documentation for public APIs

## Project Structure

```
src/
â”œâ”€â”€ Mass.Launcher/    # Platform launcher
â”œâ”€â”€ Mass.Core/        # Core abstractions
â”œâ”€â”€ ProUSB/          # ProUSB tool
â””â”€â”€ MassBoot/        # MassBoot server

tests/               # Unit & integration tests
plugins/             # First-party plugins
```

## Building

```powershell
dotnet restore
dotnet build
```

## Testing

```powershell
dotnet test
```

## Pull Request Process

1. Update documentation if needed
2. Add/update tests for changes
3. Ensure all tests pass
4. Update CHANGELOG.md with PR number
5. Request review from maintainers
6. Address review feedback
7. Squash commits before merge (if needed)

## Plugin Development

See `/docs/plugin-development/` for plugin SDK documentation.

## Questions?

Open an issue for discussion before starting large changes.




==============================================================================
File: \DOCUMENTATION.md
==============================================================================
# Mass - Complete Documentation

**Mass** is a proprietary deployment and media creation suite combining professional-grade tools for USB media creation and network booting.

## Table of Contents
1. [Getting Started](#getting-started)
2. [Architecture](#architecture)
3. [Components](#components)
4. [Configuration](#configuration)
5. [Deployment](#deployment)
6. [API Reference](#api-reference)
7. [Security](#security)
8. [Troubleshooting](#troubleshooting)

---

## Getting Started

### Prerequisites
- .NET 10.0 SDK or later
- Windows 10/11 or Windows Server 2019+
- Administrator privileges (for USB operations and network ports)

### Quick Start

**Building the Solution:**
```bash
cd C:\Path\To\ProUSBMediaSuite
dotnet build Mass.sln
```

**Running ProUSBMediaSuite (UI):**
```bash
cd src\UI
dotnet run
```

**Running ProPXEServer (Backend):**
```bash
cd ProPXEServer\ProPXEServer.API
dotnet run
```

---

## Architecture

### Solution Structure
```
Mass/
â”œâ”€â”€ Mass.sln                    # Main solution file
â”œâ”€â”€ ProUSB     # USB media creation tool (UI)
â”œâ”€â”€ ProPXEServer/               # Backend directory
â”‚   â”œâ”€â”€ ProPXEServer.API/
â”‚   â”‚   â”œâ”€â”€ ProPXEServer.API.csproj
â”‚   â”‚   â”œâ”€â”€ Controllers/        # REST API endpoints
â”‚   â”‚   â”œâ”€â”€ Services/           # Background services (DHCP, TFTP)
â”‚   â”‚   â”œâ”€â”€ Data/               # EF Core models
â”‚   â”‚   â”œâ”€â”€ Security/           # Security policies
â”‚   â”‚   â””â”€â”€ wwwroot/pxe/        # Boot files storage
â”‚   â””â”€â”€ ProPXEServer.Client/
â”‚       â””â”€â”€ ProPXEServer.Client.csproj  # Blazor WebAssembly UI
â””â”€â”€ README.md
```

### Technology Stack
- **Frontend**: Avalonia (ProUSBMediaSuite), Blazor WebAssembly (ProPXEServer Admin)
- **Backend**: ASP.NET Core 10.0, Entity Framework Core
- **Database**: SQLite
- **Authentication**: JWT Bearer tokens
- **Payment**: Stripe integration
- **Network**: UDP sockets (DHCP, TFTP)

---

## Components

### 1. ProUSBMediaSuite
Professional USB bootable media creation tool.

**Features:**
- Multi-format ISO support (Windows, Linux, macOS)
- Advanced partitioning (GPT/MBR, FAT32/NTFS)
- Large file handling (WIM splitting for FAT32)
- Post-burn verification
- Disk formatting and sanitization

**Key Classes:**
- `MainViewModel` - Main UI logic and orchestration
- `NativeDiskFormatter` - Low-level disk operations
- `IsoMediaWriter` - ISO to USB burning engine

### 2. ProPXEServer
Network PXE boot server with web management interface.

**Features:**
- **Dual Mode DHCP**: Standard DHCP (port 67) and ProxyDHCP (port 4011)
- **Architecture Detection**: Automatically serves correct boot files for BIOS/UEFI/ARM64
- **TFTP Server**: Serves boot files over TFTP (port 69)
- **Web API**: Manage boot files, view logs, configure settings
- **Security**: IP whitelisting, MAC validation, rate limiting
- **Subscription**: Stripe-powered monthly billing

**Key Services:**
- `DhcpService` - DHCP and ProxyDHCP server
- `TftpServerService` - TFTP file server
- `HttpBootService` - HTTP boot file serving
- `AuthController` - User authentication
- `BootFilesController` - Boot file management

---

## Configuration

### ProPXEServer Configuration
**Location**: `ProPXEServer/ProPXEServer.API/appsettings.json`

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=ProPXEServer.db"
  },
  "ProPXEServer": {
    "AdvertisedIP": "192.168.1.100",
    "BootFilesDirectory": "BootFiles",
    "DhcpListenPort": 67,
    "ProxyDhcpListenPort": 4011,
    "TftpListenPort": 69
  },
  "TftpSettings": {
    "RootPath": "wwwroot/pxe",
    "Port": 69,
    "BlockSize": 512,
    "MaxRetries": 5
  },
  "JwtSettings": {
    "SecretKey": "your-secret-key-here",
    "Issuer": "ProPXEServer",
    "Audience": "MassBootClient",
    "ExpiryMinutes": 60
  },
  "Security": {
    "IpWhitelist": [],
    "IpBlacklist": [],
    "EnableRateLimiting": true,
    "MaxRequestsPerMinute": 100
  },
  "Stripe": {
    "SecretKey": "sk_live_YOUR_KEY",
    "WebhookSecret": "whsec_YOUR_SECRET",
    "MonthlyPriceId": "price_YOUR_PRICE_ID",
    "MonthlyAmount": 2000
  }
}
```

### Boot Files Configuration
Boot files must be organized in architecture-specific directories:
```
wwwroot/pxe/
â”œâ”€â”€ bios/
â”‚   â””â”€â”€ mass.kpxe
â”œâ”€â”€ uefi/
â”‚   â””â”€â”€ mass.efi
â””â”€â”€ arm64/
    â””â”€â”€ mass-arm64.efi
```

---

## Deployment

### Development Deployment

1. **Set up database:**
```bash
cd ProPXEServer/ProPXEServer.API
dotnet ef database update
```

2. **Configure settings:**
   - Update `appsettings.json` with your IP, JWT secret, and Stripe keys

3. **Run services:**
```bash
# Terminal 1 - API
dotnet run --project ProPXEServer/ProPXEServer.API

# Terminal 2 - Client (optional)
dotnet run --project ProPXEServer/ProPXEServer.Client
```

### Production Deployment

1. **Publish the application:**
```bash
dotnet publish Mass.sln -c Release -o ./publish
```

2. **Configure firewall:**
   - Allow UDP ports: 67, 69, 4011
   - Allow TCP ports: 80, 443 (for API)

3. **Run as Windows Service:**
```bash
sc create ProPXEServer binPath="C:\Path\To\publish\ProPXEServer.API.exe"
sc start ProPXEServer
```

4. **Configure reverse proxy (IIS/Nginx):**
   - Proxy API requests to Kestrel
   - Serve static files from wwwroot

---

## API Reference

### Authentication

**POST /api/auth/register**
```json
{
  "email": "user@example.com",
  "password": "SecurePass123!"
}
```

**POST /api/auth/login**
```json
{
  "email": "user@example.com",
  "password": "SecurePass123!"
}
```
Returns: JWT token

### Boot Files Management

**GET /api/bootfiles**
- Returns list of all boot files

**POST /api/bootfiles/upload**
- Uploads a boot file (multipart/form-data)
- Automatically categorizes by architecture

**GET /api/bootfiles/download/{filename}**
- Downloads a boot file

**DELETE /api/bootfiles/{filename}**
- Deletes a boot file

### Subscription

**POST /api/subscription/create-checkout**
- Creates Stripe checkout session

**POST /api/subscription/webhook**
- Stripe webhook endpoint for payment events

---

## Security

### Network Security
- **IP Whitelisting**: Configure allowed IPs in `Security.IpWhitelist`
- **MAC Validation**: Validates MAC addresses for DHCP/PXE requests
- **Rate Limiting**: 100 requests/minute per IP (configurable)

### API Security
- **JWT Authentication**: All protected endpoints require bearer token
- **HTTPS**: Use reverse proxy (IIS/Nginx) for SSL termination
- **CORS**: Configure allowed origins in `Program.cs`

### Best Practices
1. Change default JWT secret key
2. Use strong passwords for admin accounts
3. Keep Stripe keys secure (use environment variables)
4. Regularly update boot files
5. Monitor PXE event logs for suspicious activity

---

## Troubleshooting

### Common Issues

**1. Build Errors**
```bash
# Clean and rebuild
dotnet clean Mass.sln
dotnet build Mass.sln
```

**2. DHCP Server Not Starting**
- Ensure administrator privileges
- Check port 67 is not in use: `netstat -an | findstr :67`
- Verify firewall allows UDP 67

**3. TFTP Files Not Serving**
- Verify files exist in `wwwroot/pxe/{bios,uefi,arm64}/`
- Check TFTP port 69 is open
- Review logs in `ProPXEServer.db` PxeEvents table

**4. Client Not Booting**
- Verify network boot is enabled in BIOS
- Check client received IP from DHCP
- Ensure correct boot file for architecture
- Review DHCP logs for client MAC address

**5. Authentication Fails**
- Verify JWT secret matches across all configs
- Check token expiry (default 60 minutes)
- Ensure database is initialized

### Logging
Logs are stored in:
- **Database**: `ProPXEServer.db` â†’ `PxeEvents` table
- **Console**: Real-time output (when running with `dotnet run`)
- **Application Insights**: Configure in `appsettings.json` for production

---

## Support
This is proprietary software. For support, contact the system administrator.

## License
**Mass** is proprietary software. All rights reserved. Unauthorized copying, modification, distribution, or use of this software is strictly prohibited.




==============================================================================
File: \PXE-SETUP-GUIDE.md
==============================================================================
# Mass Suite PXE Boot Files - Installation Guide

## ðŸ“ File Organization

Your Mass Suite PXE boot files have been copied and rebranded from netboot.xyz to:

```
c:\Users\Administrator\Desktop\Mass\src\ProPXEServer\ProPXEServer.API\wwwroot\pxe\
```

### File Mapping (Rebranded)

| Original File | Mass Suite File | Purpose |
|--------------|----------------|---------|
| `netboot.xyz.kpxe` | `masssuite.kpxe` | **BIOS Legacy** - Standard PXE boot |
| `netboot.xyz-undionly.kpxe` | `masssuite-undionly.kpxe` | BIOS with UNDI |
| `netboot.xyz.efi` | `masssuite.efi` | **UEFI 64-bit** - Modern systems |
| `netboot.xyz-snp.efi` | `masssuite-snp.efi` | UEFI with SNP driver |
| `netboot.xyz-snponly.efi` | `masssuite-snponly.efi` | UEFI SNP only |
| `netboot.xyz-arm64.efi` | `masssuite-arm64.efi` | **ARM64 UEFI** - Raspberry Pi, etc. |
| `netboot.xyz-arm64-snp.efi` | `masssuite-arm64-snp.efi` | ARM64 with SNP |
| `netboot.xyz.iso` | `masssuite.iso` | Bootable ISO image |
| `netboot.xyz.img` | `masssuite.img` | Disk image |
| `netboot.xyz.usb` | `masssuite.usb` | USB bootable |
| `netboot.xyz.dsk` | `masssuite.dsk` | Disk image |

---

## ðŸ”§ DHCP Configuration

Configure your DHCP server to point clients to Mass Suite PXE server:

### For BIOS (Legacy) Systems:
```
DHCP Option 66: <Your Server IP>  (e.g., 192.168.1.100)
DHCP Option 67: masssuite.kpxe
```

### For UEFI Systems:
```
DHCP Option 66: <Your Server IP>
DHCP Option 67: masssuite.efi
```

### For ARM64 Systems:
```
DHCP Option 66: <Your Server IP>
DHCP Option 67: masssuite-arm64.efi
```

---

## âš™ï¸ ProPXEServer Configuration

Update `appsettings.json` in ProPXEServer.API:

```json
{
  "MassBootServer": {
    "AdvertisedIP": "192.168.1.100",  // â† Change to your server IP
    "TftpListenPort": 69,
    "DhcpListenPort": 67,
    "ProxyDhcpListenPort": 4011
  },
  "TftpSettings": {
    "RootPath": "wwwroot/pxe",
    "Port": 69,
    "BlockSize": 512
  }
}
```

---

## ðŸš€ Starting Mass Suite PXE Server

1. **Build the solution:**
   ```powershell
   dotnet build
   ```

2. **Run ProPXEServer.API:**
   ```powershell
   cd src\ProPXEServer\ProPXEServer.API
   dotnet run
   ```

3. **Verify TFTP server is running:**
   - Check logs for: `TFTP Server started successfully`
   - Should listen on port 69

4. **Test from client machine:**
   - Boot a computer via PXE
   - Should see "Mass Suite" boot menu

---

## ðŸ“Š File Recommendations by Architecture

| Client Type | Recommended File |
|------------|------------------|
| **Modern Desktop/Laptop (UEFI)** | `masssuite.efi` |
| **Legacy Desktop/Laptop (BIOS)** | `masssuite.kpxe` |
| **Server Hardware** | `masssuite-snp.efi` |
| **Raspberry Pi 4/5** | `masssuite-arm64.efi` |
| **Virtual Machines** | `masssuite.kpxe` or `masssuite.efi` |

---

## ðŸ” Troubleshooting

### Client doesn't boot:
- Verify DHCP options 66 & 67 are set correctly
- Check firewall allows UDP port 69 (TFTP)
- Confirm server IP is correct in appsettings.json

### TFTP timeout:
- Ensure ProPXEServer.API is running
- Check Windows Firewall rules
- Verify files exist in `wwwroot\pxe\`

### Wrong architecture boots:
- UEFI systems need `.efi` files
- BIOS systems need `.kpxe` files
- Configure DHCP to serve different files based on client architecture

---

## ðŸ“ Production Checklist

- [ ] Files copied to `wwwroot\pxe\`
- [ ] `appsettings.json` configured with correct IP
- [ ] Windows Firewall allows UDP 69, 67, 4011
- [ ] DHCP server configured with options 66 & 67
- [ ] ProPXEServer.API running and listening
- [ ] Tested boot from BIOS client
- [ ] Tested boot from UEFI client

---

**Mass Suite PXE Server is ready for production! ðŸŽ‰**




==============================================================================
File: \README.md
==============================================================================
<div align="center">

# ðŸš€ Mass

### Professional Deployment & Media Creation Suite

*The ultimate solution for bootable USB creation and network PXE booting*

[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)](https://github.com)
[![.NET Version](https://img.shields.io/badge/.NET-10.0-512BD4)](https://dotnet.microsoft.com/)
[![License](https://img.shields.io/badge/license-MIT-blue)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-Windows-0078D4)](https://www.microsoft.com/windows)

---

</div>

## ðŸ“‹ Table of Contents

- [Overview](#-overview)
- [Components](#-components)
- [Features](#-features)
- [Quick Start](#-quick-start)
- [Installation](#-installation)
- [Project Structure](#-project-structure)
- [Documentation](#-documentation)
- [Architecture](#-architecture)
- [Security](#-security)
- [License](#-license)

---

## ðŸŽ¯ Overview

**Mass** is an enterprise-grade suite that combines powerful deployment tools into one unified solution:

1. **ProUSB** - Advanced bootable USB creation tool
2. **ProPXEServer** - Intelligent network PXE boot server with web management

Whether you're deploying operating systems across a datacenter or creating recovery media for field technicians, Mass provides professional-grade tools in a modern, cohesive platform.

---

## ðŸ§© Components

### ProUSB

<table>
<tr>
<td width="50%">

**Professional USB Media Creation**

Create bootable USB drives from ISO images with precision and reliability. Built with Avalonia for a modern cross-platform UI experience.

- âœ… Multi-format ISO support (Windows, Linux, macOS)
- âœ… Intelligent partitioning (GPT/MBR auto-detection)
- âœ… Filesystem flexibility (FAT32/NTFS)
- âœ… Large file handling (WIM splitting for FAT32)
- âœ… Post-burn verification
- âœ… Comprehensive disk sanitization
- âœ… Real-time progress tracking

</td>
<td width="50%">

**Supported Operating Systems**

- ðŸªŸ Windows 11/10/Server
- ðŸ§ Ubuntu/Debian/RHEL/Fedora
- ðŸ“€ Custom boot media
- ðŸ› ï¸ Rescue/Recovery ISOs
- ðŸ’¿ Any bootable ISO image

**Key Technologies**
- Avalonia UI framework
- MVVM architecture
- Native disk management APIs
- ISO patching engine

</td>
</tr>
</table>

### ProPXEServer

<table>
<tr>
<td width="50%">

**Network PXE Boot Infrastructure**

Deploy a complete PXE boot environment with modern web-based management console.

- ðŸŒ Dual-mode DHCP (Standard + Proxy)
- ðŸŽ¯ Automatic architecture detection (BIOS/UEFI/ARM64)
- ðŸ“¡ Integrated TFTP server
- ðŸ” Enterprise security (JWT, rate limiting)
- ðŸ“Š Real-time boot event logging
- ðŸ’³ Optional Stripe subscription integration
- ðŸ–¥ï¸ Blazor WebAssembly admin interface

</td>
<td width="50%">

**Boot Support**

| Architecture | Boot File |
|-------------|-----------|
| BIOS (Legacy) | `netboot.xyz.kpxe` |
| UEFI x64 | `netboot.xyz.efi` |
| ARM64 | `netboot.xyz-arm64.efi` |

**Pre-configured with netboot.xyz** providing access to 100+ operating systems right out of the box.

</td>
</tr>
</table>

---

## âœ¨ Features

### ProUSB

| Feature | Description |
|---------|-------------|
| ðŸŽ¨ **Modern UI** | Built with Avalonia for sleek, responsive cross-platform interface |
| âš¡ **High Performance** | Optimized burning engine with real-time progress tracking |
| ðŸ” **Verification** | Comprehensive post-burn file integrity checking |
| ðŸ—‚ï¸ **Smart Detection** | Automatic USB drive enumeration and metadata reading |
| ðŸ›¡ï¸ **Safe Operations** | Confirmations, logging, and operational safeguards |
| ðŸ“¦ **Plugin Architecture** | Integrates seamlessly with Mass.Launcher |

### ProPXEServer

| Feature | Description |
|---------|-------------|
| ðŸŒ **DHCP Server** | Standard DHCP on port 67 with PXE boot options |
| ðŸ”€ **ProxyDHCP** | Coexists with existing DHCP servers on port 4011 |
| ðŸ“ **TFTP Server** | High-performance boot file delivery over UDP port 69 |
| ðŸ–¥ï¸ **Web Interface** | Modern Blazor WebAssembly admin panel |
| ðŸ” **JWT Auth** | Secure API access with bearer token authentication |
| ðŸš¦ **Rate Limiting** | Configurable request throttling and IP whitelisting |
| ðŸ“ **Event Logging** | Comprehensive boot event tracking with EF Core |
| ðŸ’° **Subscriptions** | Optional Stripe payment processing integration |
| ðŸŒ **netboot.xyz** | Pre-deployed with 100+ OS boot options |

---

## ðŸš€ Quick Start

### Prerequisites

- **.NET 10.0 SDK** (required)
- **Windows 10/11** or **Windows Server 2019+**
- **Administrator privileges** (for disk operations and network services)

### Build the Solution

```bash
# Clone the repository
git clone https://github.com/yourusername/mass.git
cd ProUSBMediaSuite

# Restore dependencies
dotnet restore Mass.sln

# Build all projects
dotnet build Mass.sln
```

### Run Mass.Launcher (Main Application)

```bash
cd src/Mass.Launcher
dotnet run
```

The launcher provides a unified interface to access both ProUSB and ProPXEServer.

### Run ProUSB Standalone

```bash
# ProUSB is a plugin, launched via Mass.Launcher
# Or build as standalone executable
```

### Run ProPXEServer

```bash
cd src/ProPXEServer/ProPXEServer.API
dotnet run
```

> **Note**: ProPXEServer requires administrator privileges for DHCP/TFTP server operations. Access the web interface at `https://localhost:5001`

---

## ðŸ“¦ Installation

### Development Setup

1. **Clone and restore**
   ```bash
   git clone https://github.com/yourusername/mass.git
   cd ProUSBMediaSuite
   dotnet restore Mass.sln
   ```

2. **Build solution**
   ```bash
   dotnet build Mass.sln
   ```

3. **Initialize database** (ProPXEServer)
   ```bash
   cd src/ProPXEServer/ProPXEServer.API
   dotnet ef database update
   ```

4. **Configure settings**
   - Edit `src/ProPXEServer/ProPXEServer.API/appsettings.json`
   - Set advertised IP, JWT secret, and optional Stripe keys

5. **Run**
   ```bash
   cd src/Mass.Launcher
   dotnet run
   ```

### Production Deployment

```bash
# Publish optimized release build
dotnet publish Mass.sln -c Release -o ./publish

# ProPXEServer can be configured as Windows Service
sc create ProPXEServer binPath="C:\Path\To\publish\ProPXEServer.API.exe"
sc start ProPXEServer
```

---

## ðŸ—ï¸ Project Structure

```
Mass Solution
â”œâ”€â”€ Mass.Core                 â†’ Shared core functionality
â”‚   â”œâ”€â”€ Plugin system
â”‚   â”œâ”€â”€ Shared services
â”‚   â””â”€â”€ Common models
â”‚
â”œâ”€â”€ Mass.Launcher             â†’ Main application launcher
â”‚   â”œâ”€â”€ Plugin discovery
â”‚   â”œâ”€â”€ Navigation
â”‚   â””â”€â”€ Home interface
â”‚
â”œâ”€â”€ Mass.CLI                  â†’ Command-line interface
â”‚
â”œâ”€â”€ Mass.PowerShell           â†’ PowerShell module
â”‚
â”œâ”€â”€ ProUSB                    â†’ USB media creation tool
â”‚   â”œâ”€â”€ Services              â†’ USB, ISO, Disk, Burn engines
â”‚   â”œâ”€â”€ ViewModels            â†’ MVVM pattern
â”‚   â”œâ”€â”€ Views                 â†’ Avalonia UI components
â”‚   â”œâ”€â”€ Infrastructure        â†’ Disk management, patching
â”‚   â””â”€â”€ Domain                â†’ Core business logic
â”‚
â””â”€â”€ ProPXEServer              â†’ PXE boot infrastructure
    â”œâ”€â”€ ProPXEServer.API      â†’ ASP.NET Core backend
    â”‚   â”œâ”€â”€ Controllers       â†’ REST API endpoints
    â”‚   â”œâ”€â”€ Services          â†’ DHCP, TFTP, HTTP Boot
    â”‚   â”œâ”€â”€ Data              â†’ EF Core models & DbContext
    â”‚   â”œâ”€â”€ Security          â†’ JWT, rate limiting
    â”‚   â””â”€â”€ wwwroot/tftp      â†’ Boot files (netboot.xyz)
    â”‚
    â”œâ”€â”€ ProPXEServer.Client   â†’ Blazor WebAssembly UI
    â”‚   â”œâ”€â”€ Pages             â†’ Admin dashboard
    â”‚   â””â”€â”€ Services          â†’ API clients
    â”‚
    â””â”€â”€ ProPXEServer.Plugin   â†’ Mass.Launcher integration
```

### Solution Projects

| Project | Type | Description |
|---------|------|-------------|
| **Mass.Core** | Library | Shared core functionality and plugin system |
| **Mass.Launcher** | Desktop App | Main launcher with plugin architecture |
| **Mass.CLI** | Console App | Command-line interface |
| **Mass.PowerShell** | PowerShell Module | PowerShell cmdlets |
| **ProUSB** | Library/Plugin | USB media creation engine |
| **ProPXEServer.API** | Web API | ASP.NET Core backend |
| **ProPXEServer.Client** | Blazor WASM | Admin web interface |
| **ProPXEServer.Plugin** | Library | Launcher integration |

---

## ðŸ“š Documentation

**Complete documentation is available:**

- ðŸ“– **[DOCUMENTATION.md](DOCUMENTATION.md)** - Architecture, deployment, troubleshooting
- ðŸ”Œ **[API.md](API.md)** - REST API reference with examples
- ðŸ¤ **[CONTRIBUTING.md](CONTRIBUTING.md)** - Contribution guidelines

### Quick Links

- [Configuration Guide](DOCUMENTATION.md#configuration)
- [Deployment Guide](DOCUMENTATION.md#deployment)
- [Security Best Practices](DOCUMENTATION.md#security)
- [API Authentication](API.md#authentication-endpoints)
- [Troubleshooting](DOCUMENTATION.md#troubleshooting)

---

## ðŸ—ï¸ Architecture

### Technology Stack

| Component | Technology |
|-----------|-----------|
| **Desktop UI** | Avalonia (cross-platform XAML) |
| **Web UI** | Blazor WebAssembly |
| **Backend** | ASP.NET Core 10.0 |
| **Database** | SQLite + Entity Framework Core |
| **Authentication** | JWT Bearer Tokens |
| **Payments** | Stripe (optional) |
| **Networking** | UDP Sockets (DHCP/TFTP) |
| **Language** | C# 14 (.NET 10.0) |

### Design Patterns

- **MVVM** - ProUSB UI architecture
- **Plugin System** - Modular component loading
- **Dependency Injection** - Service container throughout
- **Repository Pattern** - Data access abstraction
- **Strategy Pattern** - Multiple burn strategies (FileSystem, WinPE, etc.)

---

## ðŸ”’ Security

Mass implements enterprise-grade security:

### Network Security
- âœ… **IP Whitelisting** - Configurable IP range restrictions
- âœ… **MAC Validation** - Hardware address verification
- âœ… **Rate Limiting** - Configurable request throttling (default: 100 req/min)

### API Security
- âœ… **JWT Authentication** - Secure token-based authentication
- âœ… **HTTPS** - TLS encryption for all API communication
- âœ… **CORS Control** - Restrict cross-origin requests

### Best Practices
1. Use strong JWT secret keys (256-bit minimum)
2. Enable HTTPS with valid certificates in production
3. Regularly rotate API keys and secrets
4. Monitor PXE event logs for suspicious activity
5. Keep boot files updated from trusted sources
6. Run services with minimum required privileges

---

## ðŸ¤ Support

For support, documentation, or contributions:

- ðŸ“– Check [DOCUMENTATION.md](DOCUMENTATION.md) for detailed guides
- ðŸ› Report issues via GitHub Issues
- ðŸ’¬ See [CONTRIBUTING.md](CONTRIBUTING.md) for contribution guidelines

---

## ðŸ“„ License

**Mass** is licensed under the MIT License.

Copyright Â© 2025

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

---

<div align="center">

### Built with â¤ï¸ for Enterprise Deployment

**Mass** - *Deploy Anywhere, Boot Everywhere*

[Documentation](DOCUMENTATION.md) â€¢ [API Reference](API.md) â€¢ [Contributing](CONTRIBUTING.md)

</div>




==============================================================================
File: \.github\workflows\ci-cd.yml
==============================================================================
name: Mass Suite CI/CD

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches:

 [ main ]

jobs:
  build-and-test:
    runs-on: windows-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Setup .NET 10
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '10.0.x'
    
    - name: Restore dependencies
      run: dotnet restore
    
    - name: Build
      run: dotnet build --no-restore -c Release
    
    - name: Run tests
      run: dotnet test --no-build -c Release --logger "trx;LogFileName=test-results.trx" --collect:"XPlat Code Coverage"
    
    - name: Upload test results
      if: always()
      uses: actions/upload-artifact@v4
      with:
        name: test-results
        path: '**/TestResults/*.trx'
    
    - name: Upload coverage
      uses: codecov/codecov-action@v4
      with:
        files: '**/TestResults/**/coverage.cobertura.xml'
        fail_ci_if_error: false

  publish-cli:
    needs: build-and-test
    runs-on: windows-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Setup .NET 10
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '10.0.x'
    
    - name: Publish Mass.CLI
      run: dotnet publish src/Mass.CLI -c Release -r win-x64 --self-contained -p:PublishSingleFile=true
    
    - name: Upload artifact
      uses: actions/upload-artifact@v4
      with:
        name: mass-cli-win-x64
        path: src/Mass.CLI/bin/Release/net10.0/win-x64/publish/




